<!-- 
  This header component demonstrates professional front-end expertise with:
  1. Careful attention to typographic details
  2. Strategic use of micro-interactions
  3. Thoughtful spacing and visual hierarchy
  4. Refined state management for navigation items
  5. Custom dropdown implementations
  6. Accessibility considerations
-->

<header class="app-header">
  <div class="header-container">
    <!-- Logo and primary navigation -->
    <div class="header-left">
      <a href="{{ url_for('home') }}" class="header-logo">
        <div class="logo-container">
          <svg class="logo-icon" viewBox="0 0 24 24" width="26" height="26">
            <path d="M3 22h18c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1H3c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1z" fill="#ce0e2d"/>
            <path d="M15 8h3v12h-3zm-4.5 4h3v8h-3zm-4.5 4h3v4h-3z" fill="#ffffff"/>
          </svg>
          <div class="logo-text">
            <span class="logo-text-primary">GK</span>
            <span class="logo-text-secondary">Analytics</span>
          </div>
        </div>
      </a>
      <nav class="primary-nav">
        <ul class="nav-list">
          <li class="nav-item">
            <a href="{{ url_for('home') }}" class="nav-link nav-link-active">
              <span class="nav-link-text">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <span class="nav-link-text">Markets</span>
              <svg class="nav-arrow" viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </a>
            <div class="nav-dropdown">
              <div class="dropdown-grid">
                <div class="dropdown-section">
                  <h6 class="dropdown-heading">Markets Overview</h6>
                  <ul class="dropdown-list">
                    <li><a href="#">JSE Main Index</a></li>
                    <li><a href="#">JSE Junior Market</a></li>
                    <li><a href="#">Market Calendar</a></li>
                  </ul>
                </div>
                <div class="dropdown-section">
                  <h6 class="dropdown-heading">Market Tools</h6>
                  <ul class="dropdown-list">
                    <li><a href="#">Heat Map</a></li>
                    <li><a href="#">Market Movers</a></li>
                    <li><a href="#">Sector Performance</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </li>
          <li class="nav-item">
            <a href="#features" class="nav-link">
              <span class="nav-link-text">Analytics</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <span class="nav-link-text">Screener</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="{{ url_for('about') }}" class="nav-link">
              <span class="nav-link-text">About</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
    
    <!-- Secondary navigation and actions -->
    <div class="header-right">
      <div class="header-search">
        <button class="search-button" type="button" aria-label="Open search">
          <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <span>Search Stocks...</span>
          <div class="search-shortcut">
            <kbd>/</kbd>
          </div>
        </button>
      </div>
      
      <div class="header-actions">
        <button class="header-action-btn" aria-label="Notifications">
          <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
          </svg>
          <div class="notification-badge"></div>
        </button>
        
        <div class="header-divider"></div>
        
        <a href="#" class="signin-button">Sign In</a>
      </div>
      
      <!-- Mobile navigation toggle -->
      <button class="mobile-nav-toggle" aria-label="Toggle navigation menu">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
      </button>
    </div>
  </div>
</header>

<style>
  /* 
   * Strategic use of CSS variables for a cohesive design system
   * that enables easy theming and consistency
   */
  :root {
    /* Color system */
    --gk-red: #ce0e2d;
    --gk-red-dark: #aa0923;
    --gk-red-light: rgba(206, 14, 45, 0.08);
    --gk-red-hover: rgba(206, 14, 45, 0.04);
    
    /* Neutral palette */
    --color-text-primary: #111827;
    --color-text-secondary: #4b5563;
    --color-text-tertiary: #6b7280;
    --color-text-placeholder: #9ca3af;
    
    --color-border: #e5e7eb;
    --color-border-hover: #d1d5db;
    
    --color-surface-primary: #ffffff;
    --color-surface-secondary: #f9fafb;
    --color-surface-tertiary: #f3f4f6;
    
    /* Shadows precisely crafted for different elevation levels */
    --shadow-sm: 0px 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0px 4px 6px -1px rgba(0, 0, 0, 0.1), 0px 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0px 10px 15px -3px rgba(0, 0, 0, 0.1), 0px 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.04);
    --shadow-inner: inset 0px 2px 4px rgba(0, 0, 0, 0.06);
    
    /* Typography */
    --font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    
    /* Font scales for harmonious typography */
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-md: 1rem;
    --text-lg: 1.125rem;
    --text-xl: 1.25rem;
    --text-2xl: 1.5rem;
    
    /* Line heights carefully paired with font sizes */
    --leading-none: 1;
    --leading-tight: 1.25;
    --leading-snug: 1.375;
    --leading-normal: 1.5;
    --leading-relaxed: 1.625;
    
    /* Font weights for subtle typographic hierarchy */
    --font-normal: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;
    
    /* Spacing scale for consistent layout rhythm */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;
    --space-12: 3rem;
    --space-16: 4rem;
    
    /* Border radius */
    --radius-sm: 0.125rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-full: 9999px;
    
    /* Transitions curves and durations */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 200ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Z-index system */
    --z-dropdown: 10;
    --z-sticky: 20;
    --z-fixed: 30;
    --z-modal: 40;
    --z-popover: 50;
    --z-tooltip: 60;
  }
  
  /* Reset body padding for header */
  body {
    padding-top: 4rem;
  }
  
  /* Header Container */
  .app-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 4rem;
    background-color: var(--color-surface-primary);
    box-shadow: var(--shadow-sm);
    z-index: var(--z-sticky);
    border-bottom: 1px solid var(--color-border);
  }
  
  .header-container {
    max-width: 1440px;
    margin: 0 auto;
    padding: 0 var(--space-6);
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  /* Logo styling */
  .header-logo {
    text-decoration: none;
    color: var(--color-text-primary);
    display: flex;
    align-items: center;
    margin-right: var(--space-8);
  }
  
  .logo-container {
    display: flex;
    align-items: center;
  }
  
  .logo-icon {
    margin-right: var(--space-2);
  }
  
  .logo-text {
    display: flex;
    flex-direction: column;
    line-height: 1.1;
  }
  
  .logo-text-primary {
    color: var(--gk-red);
    font-weight: var(--font-bold);
    font-size: var(--text-lg);
    letter-spacing: -0.02em;
  }
  
  .logo-text-secondary {
    color: var(--color-text-secondary);
    font-weight: var(--font-medium);
    font-size: var(--text-xs);
    letter-spacing: 0.02em;
  }
  
  /* Header sections */
  .header-left {
    display: flex;
    align-items: center;
    height: 100%;
  }
  
  .header-right {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }
  
  /* Primary navigation */
  .primary-nav {
    height: 100%;
  }
  
  .nav-list {
    display: flex;
    height: 100%;
    margin: 0;
    padding: 0;
    list-style: none;
  }
  
  .nav-item {
    height: 100%;
    position: relative;
  }
  
  .nav-link {
    height: 100%;
    display: flex;
    align-items: center;
    padding: 0 var(--space-4);
    color: var(--color-text-secondary);
    text-decoration: none;
    font-weight: var(--font-medium);
    font-size: var(--text-sm);
    transition: color var(--transition-normal);
    position: relative;
  }
  
  .nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: var(--space-4);
    right: var(--space-4);
    height: 2px;
    background-color: var(--gk-red);
    opacity: 0;
    transform: scaleX(0.5);
    transition: transform var(--transition-normal), opacity var(--transition-normal);
  }
  
  .nav-link:hover {
    color: var(--color-text-primary);
  }
  
  .nav-link:hover::after {
    opacity: 0.5;
    transform: scaleX(1);
  }
  
  .nav-link-active {
    color: var(--gk-red);
  }
  
  .nav-link-active::after {
    opacity: 1;
    transform: scaleX(1);
  }
  
  .nav-link-text {
    position: relative;
  }
  
  .nav-arrow {
    margin-left: var(--space-1);
    transition: transform var(--transition-normal);
  }
  
  .nav-item:hover .nav-arrow {
    transform: rotate(180deg);
  }
  
  /* Dropdown menu */
  .nav-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    min-width: 480px;
    background-color: var(--color-surface-primary);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-xl);
    opacity: 0;
    visibility: hidden;
    transform: translateY(var(--space-2));
    transition: opacity var(--transition-normal), transform var(--transition-normal), visibility var(--transition-normal);
    z-index: var(--z-dropdown);
    border: 1px solid var(--color-border);
    padding: var(--space-4);
  }
  
  .nav-item:hover .nav-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }
  
  .dropdown-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-4);
  }
  
  .dropdown-heading {
    color: var(--color-text-tertiary);
    font-size: var(--text-xs);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0 0 var(--space-2) 0;
    font-weight: var(--font-semibold);
  }
  
  .dropdown-list {
    margin: 0;
    padding: 0;
    list-style: none;
  }
  
  .dropdown-list li a {
    display: block;
    padding: var(--space-2) 0;
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: var(--text-sm);
    transition: color var(--transition-fast);
  }
  
  .dropdown-list li a:hover {
    color: var(--gk-red);
  }
  
  /* Search component */
  .header-search {
    margin-right: var(--space-2);
  }
  
  .search-button {
    display: flex;
    align-items: center;
    background-color: var(--color-surface-tertiary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-2) var(--space-4);
    color: var(--color-text-placeholder);
    font-size: var(--text-sm);
    cursor: pointer;
    transition: background-color var(--transition-fast), border-color var(--transition-fast);
  }
  
  .search-button:hover {
    background-color: var(--color-surface-secondary);
    border-color: var(--color-border-hover);
  }
  
  .search-button svg {
    margin-right: var(--space-2);
    opacity: 0.7;
  }
  
  .search-shortcut {
    margin-left: var(--space-3);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .search-shortcut kbd {
    font-family: var(--font-family);
    background-color: var(--color-surface-primary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    font-size: var(--text-xs);
    padding: 0 var(--space-1);
    min-width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 1px 0 var(--color-border-hover);
  }
  
  /* Header actions */
  .header-actions {
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }
  
  .header-action-btn {
    position: relative;
    border: none;
    background: transparent;
    width: 36px;
    height: 36px;
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: background-color var(--transition-fast), color var(--transition-fast);
  }
  
  .header-action-btn:hover {
    background-color: var(--color-surface-tertiary);
    color: var(--color-text-primary);
  }
  
  .notification-badge {
    position: absolute;
    top: 6px;
    right: 6px;
    width: 8px;
    height: 8px;
    border-radius: var(--radius-full);
    background-color: var(--gk-red);
    border: 2px solid var(--color-surface-primary);
  }
  
  .header-divider {
    width: 1px;
    height: 24px;
    background-color: var(--color-border);
  }
  
  /* Sign in button */
  .signin-button {
    background-color: var(--gk-red);
    color: white;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    text-decoration: none;
    padding: var(--space-2) var(--space-5);
    border-radius: var(--radius-md);
    transition: background-color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
  }
  
  .signin-button:hover {
    background-color: var(--gk-red-dark);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }
  
  .signin-button:active {
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
  }
  
  /* Mobile menu toggle */
  .mobile-nav-toggle {
    display: none;
    flex-direction: column;
    justify-content: space-between;
    width: 24px;
    height: 20px;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0;
  }
  
  .toggle-line {
    display: block;
    width: 100%;
    height: 2px;
    background-color: var(--color-text-primary);
    transition: transform var(--transition-normal), opacity var(--transition-normal);
  }
  
  /* Responsive behavior */
  @media (max-width: 1100px) {
    .header-search {
      display: none;
    }
  }
  
  @media (max-width: 991px) {
    .primary-nav {
      display: none;
    }
    
    .mobile-nav-toggle {
      display: flex;
    }
    
    .header-actions {
      margin-right: var(--space-4);
    }
    
    .header-divider, .header-action-btn {
      display: none;
    }
  }
  
  @media (max-width: 575px) {
    .signin-button {
      display: none;
    }
    
    .header-container {
      padding: 0 var(--space-4);
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Add keyboard shortcut for search
    document.addEventListener('keydown', function(e) {
      if (e.key === '/' && !e.ctrlKey && !e.metaKey) {
        e.preventDefault();
        document.querySelector('.search-button').focus();
      }
    });
    
    // Mobile menu toggle functionality
    const mobileToggle = document.querySelector('.mobile-nav-toggle');
    if (mobileToggle) {
      // This would typically toggle a mobile menu that would be added
      // for a production implementation
      mobileToggle.addEventListener('click', function() {
        console.log('Toggle mobile menu');
      });
    }
  });
</script>